import{B as y,a as d,o as c,e as k,b as t,u as S,g as w,k as g,f as q,F as h,r as p,C as x,i as b,t as u,z as I,A as j}from"./app-BGRHxlSA.js";import{M as C,O as L}from"./bootstrap.esm-DIZaw3cf.js";function O(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var f={exports:{}},v;function M(){if(v)return f.exports;v=1;var e=typeof process<"u"&&process.pid?process.pid.toString(36):"",a="";if(typeof __webpack_require__!="function"&&typeof O<"u"){var s="",o=y;if(o.networkInterfaces)var n=o.networkInterfaces();if(n){t:for(let r in n){const l=n[r],_=l.length;for(var i=0;i<_;i++)if(l[i]!==void 0&&l[i].mac&&l[i].mac!="00:00:00:00:00:00"){s=l[i].mac;break t}}a=s?parseInt(s.replace(/\:|\D+/gi,"")).toString(36):""}}f.exports=f.exports.default=function(r,l){return(r||"")+a+e+m().toString(36)+(l||"")},f.exports.process=function(r,l){return(r||"")+e+m().toString(36)+(l||"")},f.exports.time=function(r,l){return(r||"")+m().toString(36)+(l||"")};function m(){var r=Date.now(),l=m.last||r;return m.last=r>l?r:l+1}return f.exports}M();const B={class:"container"},E={id:"carouselExampleIndicators",class:"carousel slide"},N={class:"carousel-inner"},F=["src"],$={key:0,class:"list-group"},T={class:"list-group mb-4"},D=["onClick"],P={class:"d-flex"},R=["src"],V={class:"flex-grow-1 d-flex flex-column justify-content-between"},J={class:"mb-1"},U={class:"text-muted fw-bold"},H={key:1,class:"list-group"},z={href:"#",class:"list-group-item list-group-item-action","aria-current":"true"},K={class:"d-flex"},W=["src"],A={class:"flex-grow-1 d-flex flex-column justify-content-between"},Q={class:""},G={class:"text-muted"},X={class:"text-muted"},Y={class:"text-muted"},Z={class:"modal",id:"exampleModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},tt={class:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"},st={class:"modal-content"},et={class:"modal-body"},at={class:"container-fluid"},ot=["onClick"],nt={class:"d-flex"},it=["src"],lt={class:"flex-grow-1 d-flex flex-column justify-content-between"},rt={class:"fw-bold"},dt={class:"text-muted"},ct={class:"text-muted"},ut={class:"text-muted small"},ht={class:"offcanvas offcanvas-bottom h-75",tabindex:"-1",id:"offcanvasBottom","aria-labelledby":"offcanvasBottomLabel"},mt={class:"offcanvas-body small"},pt={class:"container"},ft={class:"card mb-3"},bt={class:"row no-gutters"},gt={class:"col-auto"},vt=["src"],_t={class:"col"},yt={class:"card-block px-2"},kt={class:"card-title"},St={class:"card-text"},wt={class:"card-text"},qt={class:"input-group w-auto justify-content-end align-items-center"},xt=["onClick"],It=["max","onUpdate:modelValue"],jt=["onClick"],Ct={class:"d-flex justify-content-between align-items-center"},Lt={class:"text-muted"},Ot={name:"Menu",props:{stocks:Object,branchs:Object},data(){return{searchQuery:"",images:["https://placehold.co/1440x470?text=Hello+World+1","https://placehold.co/1440x470?text=Hello+World+2","https://placehold.co/1440x470?text=Hello+World+3"],dstocks:{show:!0,data:[]},dbranchs:{show:!1,data:this.branchs},uniqueModal:null,uniqueOffcanvas:null,dcarts:{show:!1,data:[]}}},methods:{notify(){alert("Notification clicked!")},showData(e){e==="menu"?(this.dstocks.show=!1,this.dbranchs.show=!1):e==="branch"&&(this.dstocks.show=!1,this.dbranchs.show=!0)},showMenu(e){console.log(e),this.$inertia.get("/get-stock/"+e.id,{},{replace:!0,preserveState:!0,preserveScroll:!0,only:["data"],onSuccess:a=>{a=a.props.data,this.dstocks.data=a,this.dstocks.show=!0,alert("Terimakasih telah memilih, silakan pilih menu yang anda inginkan"),this.uniqueModal.hide(),this.saveItemLocalStorage("branch",JSON.stringify(e))}})},orderingCart(e){this.uniqueOffcanvas=new L(document.getElementById("offcanvasBottom")),this.uniqueOffcanvas.show(),this.save2LocalStorage(e)},save2LocalStorage(e){let a=this.loadFromLocalStorage(),s=[];a.length>0&&(s=JSON.parse(a));const o=s.findIndex(n=>n.id===e.id);if(o!==-1){if(s[o].quantity>=s[o].stock_quantity){this.dcarts.data=s,alert("Stok tidak mencukupi, silakan kurangi jumlah pesanan");return}return}s.push(e),localStorage.setItem("cart",JSON.stringify(s)),console.log(this.dcarts.data),this.dcarts.data=s},loadFromLocalStorage(){return localStorage.getItem("cart")||[]},deleteFromLocalStorage(e){let a=this.loadFromLocalStorage(),s=[];a.length>0&&(s=JSON.parse(a)),s.splice(e,1),localStorage.setItem("cart",JSON.stringify(s)),this.dcarts.data=s},saveItemLocalStorage(e,a){localStorage.setItem(e,a)},clearLocalStorage(){localStorage.removeItem("cart"),this.dcarts.data=[],this.uniqueOffcanvas.hide()},increment(e){this.dcarts.data[e].quantity<this.dcarts.data[e].stock_quantity&&(this.dcarts.data[e].quantity++,this.dcarts.data[e].price_qty=this.dcarts.data[e].price*this.dcarts.data[e].quantity)},decrement(e){this.dcarts.data[e].quantity>1?(this.dcarts.data[e].quantity--,this.dcarts.data[e].price_qty=this.dcarts.data[e].price*this.dcarts.data[e].quantity):this.deleteFromLocalStorage(e)},goToPayment(){if(this.dcarts.data.length===0){alert("Keranjang masih kosong, silakan pilih menu terlebih dahulu");return}this.$inertia.get("/cart",{},{onSuccess:()=>{}})},num2hum(e){return e=parseFloat(e)||0,e.toLocaleString("en-US",{maximumFractionDigits:2})}},computed:{groupedStocks(){if(!this.dstocks.data||this.dstocks.data.length===0)return{};const e={};return this.dstocks.data.forEach(a=>{const s=a.category_name||"Lain-lain";e[s]||(e[s]=[]),e[s].push(a)}),e}},mounted(){this.uniqueModal=new C(document.getElementById("exampleModal"),{keyboard:!1}),this.uniqueModal.show()}},Et=Object.assign(Ot,{setup(e){return(a,s)=>(c(),d(h,null,[k(S(w),{title:"Menu"}),s[12]||(s[12]=t("nav",{class:"navbar bg-body-tertiary"},[t("div",{class:"container-fluid"},[t("a",{class:"navbar-brand"},"MyStore"),t("form",{class:"d-flex",role:"search"},[t("input",{class:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"}),t("button",{class:"btn btn-outline-success",type:"submit"},"Search")])])],-1)),t("div",B,[t("div",E,[s[2]||(s[2]=t("div",{class:"carousel-indicators"},[t("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":"0",class:"active","aria-current":"true","aria-label":"Slide 1"}),t("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":"1","aria-label":"Slide 2"}),t("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":"2","aria-label":"Slide 3"})],-1)),t("div",N,[(c(!0),d(h,null,p(a.images,(o,n)=>(c(),d("div",{class:x(["carousel-item",{active:n===0}]),key:n},[t("img",{src:o,class:"d-block w-100",alt:"..."},null,8,F)],2))),128))]),s[3]||(s[3]=q('<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev"><span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="visually-hidden">Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next"><span class="carousel-control-next-icon" aria-hidden="true"></span><span class="visually-hidden">Next</span></button>',2))]),s[5]||(s[5]=t("hr",null,null,-1)),a.dstocks.show?(c(),d("div",$,[(c(!0),d(h,null,p(a.groupedStocks,(o,n)=>(c(),d("div",{key:n},[t("h4",null,u(n),1),s[4]||(s[4]=b()),t("div",T,[(c(!0),d(h,null,p(o,(i,m)=>(c(),d("a",{key:i.id,href:"#",class:"list-group-item list-group-item-action","aria-current":"true",onClick:r=>a.orderingCart(i)},[t("div",P,[t("img",{src:i.stock_thumbnail,alt:"Produk",class:"rounded me-3",style:{width:"80px",height:"80px","object-fit":"cover"}},null,8,R),t("div",V,[t("div",null,[t("h5",J,u(i.stock_name),1)]),t("div",U,"Rp "+u(a.num2hum(i.price)),1)])])],8,D))),128))])]))),128))])):g("",!0),s[6]||(s[6]=t("hr",null,null,-1)),a.dbranchs.show?(c(),d("div",H,[(c(!0),d(h,null,p(a.dbranchs.data,(o,n)=>(c(),d("a",z,[t("div",K,[t("img",{src:o.stock_thumbnail,alt:"Produk",class:"rounded me-3",style:{width:"80px",height:"80px","object-fit":"cover"}},null,8,W),t("div",A,[t("h6",Q,u(o.branch_name),1),t("div",G,u(o.branch_address),1),t("div",X,u(o.branch_phone),1),t("div",Y,u(o.branch_type),1)])])]))),256))])):g("",!0)]),t("div",Z,[t("div",tt,[t("div",st,[s[10]||(s[10]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Selamat datang, Pilih cabang terdekat kamu dulu")],-1)),t("div",et,[t("div",at,[(c(!0),d(h,null,p(a.dbranchs.data,(o,n)=>(c(),d("a",{href:"#",class:"list-group-item list-group-item-action","aria-current":"true",onClick:i=>a.showMenu(o)},[t("div",nt,[t("img",{src:o.branch_thumbnail,alt:"Cabang alt",class:"rounded me-3",style:{width:"80px",height:"80px","object-fit":"cover"}},null,8,it),t("div",lt,[t("h6",rt,[b(u(o.branch_name)+" ",1),s[7]||(s[7]=t("small",{class:"fw-light",style:{"font-size":"10px"}},"400km",-1))]),t("div",dt,[s[8]||(s[8]=t("i",{class:"pi pi-map-marker"},null,-1)),b(" "+u(o.branch_address),1)]),t("div",ct,[s[9]||(s[9]=t("i",{class:"pi pi-phone"},null,-1)),b(" "+u(o.branch_phone),1)]),t("div",ut,u(o.branch_type),1)])])],8,ot))),256))])])])])]),t("div",ht,[s[11]||(s[11]=t("div",{class:"offcanvas-header"},[t("h5",{class:"offcanvas-title",id:"offcanvasBottomLabel"},"Tambah Keranjang"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),t("div",mt,[t("div",pt,[(c(!0),d(h,null,p(a.dcarts.data,(o,n)=>(c(),d("div",ft,[t("div",bt,[t("div",gt,[t("img",{style:{width:"120px",height:"120px","object-fit":"cover"},src:o.stock_thumbnail,class:"img-fluid",alt:""},null,8,vt)]),t("div",_t,[t("div",yt,[t("h4",kt,u(o.stock_name),1),t("p",St,u(o.stock_description_cut),1),t("p",wt,"Rp "+u(a.num2hum(o.price_qty)),1),t("div",qt,[t("input",{onClick:i=>a.decrement(n),type:"button",value:"-",class:"button-minus border rounded-circle icon-shape icon-sm mx-1"},null,8,xt),I(t("input",{type:"number",step:"1",max:o.stock_quantity,"onUpdate:modelValue":i=>o.quantity=i,name:"quantity",class:"quantity-field border-0 text-center w-25"},null,8,It),[[j,o.quantity,void 0,{number:!0}]]),t("input",{onClick:i=>a.increment(n),type:"button",value:"+",class:"button-plus border rounded-circle icon-shape icon-sm"},null,8,jt)])])])])]))),256)),t("div",Ct,[t("div",Lt,"Total: Rp "+u(a.num2hum(a.dcarts.data.reduce((o,n)=>o+n.price*n.quantity,0))),1),t("button",{class:"btn btn-danger",onClick:s[0]||(s[0]=(...o)=>a.clearLocalStorage&&a.clearLocalStorage(...o))},"Hapus Keranjang"),t("button",{class:"btn btn-primary",onClick:s[1]||(s[1]=o=>{a.uniqueOffcanvas.hide(),a.goToPayment()})},"Selesai")])])])])],64))}});export{Et as default};
