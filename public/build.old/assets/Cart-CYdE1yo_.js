import{a as r,o as d,e as p,b as t,u as g,g as b,f as y,i as c,t as l,F as u,r as v,z as h,A as m}from"./app-BGRHxlSA.js";import{M as f,O as k}from"./bootstrap.esm-DIZaw3cf.js";const S={class:"container"},q={class:"row no-gutters mt-3"},C={class:"col-6"},w={class:"btn border border-danger"},_={class:"row no-gutters"},M={class:"col-12"},B={class:"card mb-3"},L={class:"row no-gutters"},O={class:"col-auto"},N=["src"],F={class:"col"},I={class:"card-block"},P={class:"card-title"},T={class:"card-text"},j={class:"input-group w-auto justify-content-end align-items-center"},D=["onClick"],J=["max","onUpdate:modelValue"],V=["onClick"],$={class:"row no-gutters"},x={class:"col-12"},E={class:"row no-gutters"},H={class:"col-6 text-end"},K={class:"col-6 text-end"},R={class:"col-6 text-end"},U={class:"col-6 text-end"},Q={class:"modal",id:"metodePembayaran","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},W={class:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"},z={class:"modal-content"},A={class:"modal-body"},G={class:"container-fluid"},X={class:"row no-gutter"},Y={class:"col-6"},Z={class:"col-6"},tt={name:"Menu",props:{stocks:Object,branchs:Object},data(){return{searchQuery:"",images:["https://placehold.co/1440x470?text=Hello+World+1","https://placehold.co/1440x470?text=Hello+World+2","https://placehold.co/1440x470?text=Hello+World+3"],dstocks:{show:!0,data:[]},dbranchs:{show:!1,data:this.branchs},uniqueModal:null,uniqueOffcanvas:null,dcarts:{show:!1,data:[]},detailCart:{qty:0,taxes:0,point:0,total:0,notes:"",branch:JSON.parse(this.loadFromLocalStorageByKey("branch")||[]),payBy:null}}},methods:{notify(){alert("Notification clicked!")},showData(s){s==="menu"?(this.dstocks.show=!1,this.dbranchs.show=!1):s==="branch"&&(this.dstocks.show=!1,this.dbranchs.show=!0)},showMenu(s){console.log(s),this.$inertia.get("/get-stock/"+s.id,{},{replace:!0,preserveState:!0,preserveScroll:!0,only:["data"],onSuccess:e=>{e=e.props.data,this.dstocks.data=e,this.dstocks.show=!0,alert("Terimakasih telah memilih, silakan pilih menu yang anda inginkan"),this.uniqueModal.hide()}})},orderingCart(s){this.uniqueOffcanvas=new k(document.getElementById("offcanvasBottom")),this.uniqueOffcanvas.show(),this.save2LocalStorage(s)},save2LocalStorage(s){let e=this.loadFromLocalStorage(),a=[];e.length>0&&(a=JSON.parse(e));const o=a.findIndex(i=>i.id===s.id);if(o!==-1){if(a[o].quantity>=a[o].stock_quantity){this.dcarts.data=a,alert("Stok tidak mencukupi, silakan kurangi jumlah pesanan");return}return}a.push(s),localStorage.setItem("cart",JSON.stringify(a)),this.dcarts.data=a},loadFromLocalStorage(){const s=localStorage.getItem("cart")||[];return this.dcarts.data=JSON.parse(s),s},loadFromLocalStorageByKey(s){return localStorage.getItem(s)||[]},deleteFromLocalStorage(s){let e=this.loadFromLocalStorage(),a=[];e.length>0&&(a=JSON.parse(e)),a.splice(s,1),localStorage.setItem("cart",JSON.stringify(a)),this.dcarts.data=a},clearLocalStorage(){localStorage.removeItem("cart"),this.dcarts.data=[]},increment(s){this.dcarts.data[s].quantity<this.dcarts.data[s].stock_quantity&&(this.dcarts.data[s].quantity++,this.dcarts.data[s].price_qty=this.dcarts.data[s].price*this.dcarts.data[s].quantity)},decrement(s){if(this.dcarts.data[s].quantity>1)this.dcarts.data[s].quantity--,this.dcarts.data[s].price_qty=this.dcarts.data[s].price*this.dcarts.data[s].quantity;else{if(this.dcarts.data.length===1){alert("Keranjang tidak boleh kosong");return}this.deleteFromLocalStorage(s)}},goToPayment(){if(this.detailCart.payBy===null){this.uniqueModal=new f(document.getElementById("metodePembayaran"),{keyboard:!1}),this.uniqueModal.show();return}if(this.dcarts.data.length===0){alert("Keranjang masih kosong, silakan pilih menu terlebih dahulu");return}this.$inertia.post("/order",{carts:this.dcarts.data,detail:this.detailCart},{onSuccess:()=>{}})},getDetailCart(){this.detailCart.qty=this.dcarts.data.reduce((s,e)=>s+e.quantity,0),this.detailCart.taxes=this.dcarts.data.reduce((s,e)=>s+e.price*e.quantity*.001,0),this.detailCart.point=this.dcarts.data.reduce((s,e)=>s+e.quantity*10,0),this.detailCart.total=this.dcarts.data.reduce((s,e)=>s+e.price_qty,0),localStorage.setItem("cart",JSON.stringify(this.dcarts.data))},hideModal(){this.uniqueModal&&this.uniqueModal.hide()},num2hum(s){return s=parseFloat(s)||0,s.toLocaleString("en-US",{maximumFractionDigits:2})}},computed:{groupedStocks(){if(!this.dstocks.data||this.dstocks.data.length===0)return{};const s={};return this.dstocks.data.forEach(e=>{const a=e.category_name||"Lain-lain";s[a]||(s[a]=[]),s[a].push(e)}),s}},mounted(){this.loadFromLocalStorage(),this.getDetailCart(),console.log(this.appName)},watch:{dcarts:{handler(){this.getDetailCart()},deep:!0}}},et=Object.assign(tt,{setup(s){return(e,a)=>(d(),r(u,null,[p(g(b),{title:"Menu"}),a[19]||(a[19]=t("nav",{class:"navbar bg-body-tertiary"},[t("div",{class:"container-fluid"},[t("a",{class:"navbar-brand"},"MyStore"),t("form",{class:"d-flex",role:"search"},[t("input",{class:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"}),t("button",{class:"btn btn-outline-success",type:"submit"},"Search")])])],-1)),t("div",S,[t("div",q,[t("div",C,[t("button",w,[a[4]||(a[4]=t("i",{class:"pi pi-shopping-bag"},null,-1)),c(" "+l(e.detailCart.branch.branch_type),1)])]),a[5]||(a[5]=t("div",{class:"col-6 text-end"},[t("button",{class:"btn border border-white"},[c("Change "),t("i",{class:"pi pi-chevron-down"})])],-1)),a[6]||(a[6]=t("div",{class:"col-12 mt-3"},[t("small",null,"Customize your order at the counter")],-1))]),a[13]||(a[13]=y('<hr><div class="row no-gutters"><div class="col-6"> Phone Number </div><div class="col-6 text-end"><a href="">or Sign in</a></div><div class="col-12"><i class="pi pi-phone"></i> 08123456789 </div></div><hr>',3)),t("div",_,[t("div",M,[a[7]||(a[7]=t("h3",null,"Cabang",-1)),t("h6",null,l(e.detailCart.branch.branch_name),1)])]),a[14]||(a[14]=t("hr",{style:{"border-top":"dotted 2px"}},null,-1)),(d(!0),r(u,null,v(e.dcarts.data,(o,i)=>(d(),r("div",B,[t("div",L,[t("div",O,[t("img",{style:{width:"120px",height:"120px","object-fit":"cover"},src:o.stock_thumbnail,class:"img-fluid",alt:""},null,8,N)]),t("div",F,[t("div",I,[t("h6",P,l(o.stock_name),1),t("p",T,"Rp "+l(e.num2hum(o.price_qty)),1),t("div",j,[t("input",{onClick:n=>e.decrement(i),type:"button",value:"-",class:"button-minus border rounded-circle icon-shape icon-sm mx-1"},null,8,D),h(t("input",{type:"number",step:"1",max:o.stock_quantity,"onUpdate:modelValue":n=>o.quantity=n,name:"quantity",class:"quantity-field border-0 text-center w-25"},null,8,J),[[m,o.quantity,void 0,{number:!0}]]),t("input",{onClick:n=>e.increment(i),type:"button",value:"+",class:"button-plus border rounded-circle icon-shape icon-sm"},null,8,V)])])])])]))),256)),a[15]||(a[15]=t("hr",null,null,-1)),a[16]||(a[16]=t("div",{class:"d-flex justify-content-between align-items-center"},null,-1)),t("div",$,[t("div",x,[h(t("textarea",{class:"form-control","onUpdate:modelValue":a[0]||(a[0]=o=>e.detailCart.notes=o),rows:"3",placeholder:"Tambahkan catatan untuk toko"},null,512),[[m,e.detailCart.notes]])])]),a[17]||(a[17]=t("hr",null,null,-1)),t("div",E,[a[8]||(a[8]=t("div",{class:"col-6"},[t("p",null,"Product Quantity")],-1)),t("div",H,[t("p",null,l(e.detailCart.qty)+" Items",1)]),a[9]||(a[9]=t("div",{class:"col-6"},[t("p",null,"Total Taxes")],-1)),t("div",K,[t("p",null,"Rp "+l(e.num2hum(e.detailCart.taxes)),1)]),a[10]||(a[10]=t("div",{class:"col-6"},[t("p",null,"Point Earned")],-1)),t("div",R,[t("p",null,"+"+l(e.detailCart.point),1)]),a[11]||(a[11]=t("hr",{style:{"border-top":"dotted 2px"}},null,-1)),a[12]||(a[12]=t("div",{class:"col-6"},[t("p",null,"Total Bill")],-1)),t("div",U,[t("p",null,"Rp "+l(e.num2hum(e.detailCart.total)),1)])]),t("button",{class:"btn btn-primary w-100",onClick:a[1]||(a[1]=o=>e.goToPayment())},"Buy & Pickup")]),t("div",Q,[t("div",W,[t("div",z,[a[18]||(a[18]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Choose Payment Method"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",A,[t("div",G,[t("div",X,[t("div",Y,[t("button",{type:"button",class:"btn btn-outline-info w-100",onClick:a[2]||(a[2]=o=>{e.detailCart.payBy="qris",e.hideModal(),e.goToPayment()})},"QRIS")]),t("div",Z,[t("button",{type:"button",class:"btn btn-outline-info w-100",onClick:a[3]||(a[3]=o=>{e.detailCart.payBy="cash",e.hideModal(),e.goToPayment()})},"CASH")])])])])])])])],64))}});export{et as default};
